trigger:
- main  # Desencadenar la canalizaci√≥n cuando se realicen cambios en la rama main

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: Gradle@2
  displayName: 'Gradle Authenticate'
  inputs:
    gradleWrapperFile: 'gradlew'
    options: '-B'
    tasks: 'wrapper'

- script: './gradlew clean build'
  displayName: 'Gradle Build'
  workingDirectory: '$(System.DefaultWorkingDirectory)'  # Reemplaza '$(System.DefaultWorkingDirectory)/path/to/your/project' con la ruta a tu proyecto

- script: './gradlew test'
  displayName: 'Run Unit Tests'
  workingDirectory: '$(System.DefaultWorkingDirectory)'  # Reemplaza '$(System.DefaultWorkingDirectory)/path/to/your/project' con la ruta a tu proyecto

- script: './gradlew bootJar'
  displayName: 'Package Application (JAR)'
  workingDirectory: '$(System.DefaultWorkingDirectory)'  # Reemplaza '$(System.DefaultWorkingDirectory)/path/to/your/project' con la ruta a tu proyecto

- task: PublishPipelineArtifact@1
  displayName: 'Publish Artifact'
  inputs:
    targetPath: '$(System.DefaultWorkingDirectory)/build/libs/*.jar'  # Reemplaza '$(System.DefaultWorkingDirectory)/path/to/your/project/build/libs/*.jar' con la ruta al archivo JAR generado
